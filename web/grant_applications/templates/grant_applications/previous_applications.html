{% extends 'grant_applications/generic_form_page.html' %}

{% block content %}

  <h2 class="govuk-heading-m">{{ page.heading }}</h2>

  <form class="form" method="POST" novalidate>

    {% csrf_token %}

    <div class="govuk-form-group{% if form.has_previously_applied.errors or form.previous_applications.errors %} govuk-form-group--error{% endif %}">

      <label class="govuk-label">
        {{ form.has_previously_applied.label }}
      </label>
      <span id="has_previously_applied-hint" class="govuk-hint">
        {{ form.has_previously_applied.help_text }}
      </span>

      {% if form.has_previously_applied.errors %}
        {% for error in form.has_previously_applied.errors %}
          <span id="{{ form.has_previously_applied.name }}-issued-error" class="govuk-error-message">
            <span class="govuk-visually-hidden">
              Error:
            </span>
            {{ error|escape }}
          </span>
        {% endfor %}
      {% endif %}

      <fieldset class="govuk-fieldset">

        <div class="govuk-radios govuk-radios--conditional" data-module="govuk-radios">

          <div class="govuk-radios__item">
            {% ifequal form.has_previously_applied.value form.has_previously_applied.subwidgets.0.data.value %}
              <input class="govuk-radios__input" id="id_has_previously_applied_01" name="has_previously_applied" type="radio" value="True" checked>
            {% else %}
              <input class="govuk-radios__input" id="id_has_previously_applied_02" name="has_previously_applied" type="radio" value="True">
            {% endifequal %}
            <label class="govuk-label govuk-radios__label" for="id_has_previously_applied_0">
              {{ form.has_previously_applied.subwidgets.0.choice_label }}
            </label>
          </div>

          <div class="govuk-radios__item">
            {% ifequal form.has_previously_applied.value form.has_previously_applied.subwidgets.1.data.value %}
              <input class="govuk-radios__input" id="id_has_previously_applied_11" name="has_previously_applied" type="radio" value="False" data-aria-controls="previous_applications-conditional" checked>
            {% else %}
              <input class="govuk-radios__input" id="id_has_previously_applied_12" name="has_previously_applied" type="radio" value="False" data-aria-controls="previous_applications-conditional">
            {% endifequal %}
            <label class="govuk-label govuk-radios__label" for="id_has_previously_applied_1">
              {{ form.has_previously_applied.subwidgets.1.choice_label }}
            </label>
          </div>

          {% if form.previous_applications.errors and not form.has_previously_applied.errors %}
            {% for error in form.previous_applications.errors %}
              <span id="{{ form.previous_applications.name }}-issued-error" class="govuk-error-message">
                <span class="govuk-visually-hidden">
                  Error:
                </span>
                {{ error|escape }}
              </span>
            {% endfor %}
          {% endif %}
          <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="previous_applications-conditional">
            <div class="govuk-form-group">
              <label class="govuk-label">
                {{ form.previous_applications.label }}
              </label>
              <span id="previous_applications-hint" class="govuk-hint">
                {{ form.previous_applications.help_text }}
              </span>
              {{ form.previous_applications }}
            </div>
          </div>

        </div>
      </fieldset>
    </div>

    <button class="govuk-button" data-module="govuk-button">
      {{ page.form_button_text | default:"Continue" }}
    </button>

  </form>


{% endblock %}
